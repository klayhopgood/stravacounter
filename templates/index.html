<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Strava Preferences</title>
    <style>
        .updated-message {
            display: none;
            color: green;
        }
    </style>
</head>
<body>
    <h1>Strava Preferences</h1>
    <form action="{{ url_for('update_preferences') }}" method="POST">
        <label>
            <input type="checkbox" name="days_run" {% if preferences.days_run %}checked{% endif %}>
            Days run this year
        </label><br>
        <label>
            <input type="checkbox" name="total_kms" {% if preferences.total_kms %}checked{% endif %}>
            Total kms run this year
        </label><br>
        <label>
            <input type="checkbox" name="avg_kms" {% if preferences.avg_kms %}checked{% endif %}>
            Average kms per week (last 4 weeks)
        </label><br>
        <label>
            <input type="checkbox" name="total_elevation" {% if preferences.total_elevation %}checked{% endif %}>
            Total elevation gain this year
        </label><br>
        <label>
            <input type="checkbox" name="avg_elevation" {% if preferences.avg_elevation %}checked{% endif %}>
            Average elevation per week (last 4 weeks)
        </label><br>
        <label>
            <input type="checkbox" name="avg_pace" {% if preferences.avg_pace %}checked{% endif %}>
            Average pace per km this year
        </label><br>
        <label>
            <input type="checkbox" name="avg_pace_per_week" {% if preferences.avg_pace_per_week %}checked{% endif %}>
            Average pace per km per week (last 4 weeks)
        </label><br>
        <label>
            <input type="checkbox" name="beers_burnt" {% if preferences.beers_burnt %}checked{% endif %}>
            Beers burnt
        </label><br>
        <label>
            <input type="checkbox" name="pizza_slices_burnt" {% if preferences.pizza_slices_burnt %}checked{% endif %}>
            Pizza slices burnt
        </label><br>
        <label>
            <input type="checkbox" name="remove_promo" {% if preferences.remove_promo %}checked{% endif %}>
            Remove promo message
        </label><br>
        <button type="submit">Submit Changes</button>
    </form>
    <p class="updated-message">Preferences updated</p>

    <script>
        const urlParams = new URLSearchParams(window.location.search);
        const updated = urlParams.get('updated');
        if (updated) {
            const message = document.querySelector('.updated-message');
            message.style.display = 'block';
            setTimeout(() => {
                message.style.display = 'none';
            }, 5000);
        }
    </script>
</body>
</html>
