<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Update Preferences</title>
    <style>
        .preferences-form {
            display: flex;
            flex-direction: column;
            width: 300px;
            margin: 0 auto;
        }
        .preferences-form label {
            margin-bottom: 10px;
        }
        .preferences-form button {
            margin-top: 20px;
        }
        .paid-option {
            color: grey;
        }
    </style>
</head>
<body>
    <h1>Update Preferences</h1>
    <form action="/update_preferences" method="POST" class="preferences-form">
        <h2>Free Options</h2>
        <label>
            <input type="checkbox" name="days_run" {% if preferences.days_run %}checked{% endif %}> Days Run This Year
        </label>
        <label>
            <input type="checkbox" name="total_kms" {% if preferences.total_kms %}checked{% endif %}> Total Kms Run This Year
        </label>
        <label>
            <input type="checkbox" name="avg_kms" {% if preferences.avg_kms %}checked{% endif %}> Average Kms Per Week (Last 4 Weeks)
        </label>
        <label>
            <input type="checkbox" name="pizza_slices_burnt" {% if preferences.pizza_slices_burnt %}checked{% endif %}> Pizza Slices Burnt
        </label>

        <h2>Paid Options</h2>
        <div class="paid-option">
            <label>
                <input type="checkbox" name="total_elevation" {% if preferences.total_elevation %}checked{% endif %} {% if not preferences.is_paid_user %}disabled{% endif %}> Total Elevation Gain This Year
            </label>
            <label>
                <input type="checkbox" name="avg_elevation" {% if preferences.avg_elevation %}checked{% endif %} {% if not preferences.is_paid_user %}disabled{% endif %}> Average Elevation Per Week (Last 4 Weeks)
            </label>
            <label>
                <input type="checkbox" name="avg_pace" {% if preferences.avg_pace %}checked{% endif %} {% if not preferences.is_paid_user %}disabled{% endif %}> Average Pace
            </label>
            <label>
                <input type="checkbox" name="avg_pace_per_week" {% if preferences.avg_pace_per_week %}checked{% endif %} {% if not preferences.is_paid_user %}disabled{% endif %}> Average Pace Per Week
            </label>
            <label>
                <input type="checkbox" name="beers_burnt" {% if preferences.beers_burnt %}checked{% endif %} {% if not preferences.is_paid_user %}disabled{% endif %}> Beers Burnt
            </label>
            <label>
                <input type="checkbox" name="remove_promo" {% if preferences.remove_promo %}checked{% endif %} {% if not preferences.is_paid_user %}disabled{% endif %}> Remove Promo
            </label>
        </div>

        <button type="submit">Update Preferences</button>
    </form>

    {% if not preferences.is_paid_user %}
        <h2>Become a Paid User</h2>
        <form action="/create-checkout-session" method="POST">
            <button id="checkout-button">Sign Up</button>
        </form>
    {% else %}
        <h2>Manage Subscription</h2>
        <form action="/unsubscribe" method="POST">
            <button type="submit">Unsubscribe</button>
        </form>
    {% endif %}
</body>
</html>
